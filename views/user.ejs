<!doctype html>
<html>

<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>РОССОТРУДНИЧЕСТВО</title>
    <link href="css/admin.css" type=text/css rel=stylesheet>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
        integrity="sha512-t4GWSVZO1eC8BM339Xd7Uphw5s17a86tIZIj8qRxhnKub6WoyhnrxeCIMeAqBPgdZGlCcG2PrZjMc+Wr78+5Xg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
</head>

<body>

    <div id=mainbar>
        <a href="/admin"><h1
            style="margin-left: 16px;color:white; text-shadow: 2px 2px 5px #222; float:left; margin-top:28px; font-size: 20px;">
            АДМИНИСТРАТОР - РФ</h1></a>
        <div id=maincontainer>
            <input type=search id="search-input" placeholder="Search for locations in Turkiye (⏎)" /><button
                class="btn btn-primary" id="search-button" onclick="resetSelected(); showSidebar()">
                <i class="fa-brands fa-searchengin" style="font-size: 24px; text-shadow: 2px 2px 5px #222;"></i>
            </button><br><br><br>
        </div>


        <div class="buttoncontainer">

            <button class="white-button" onclick="resetSelected(); filterResults(); showSidebar(); "><i
                    class="fa-solid fa-hand-holding-heart" style="font-size: 24px;"></i>
                <p class="buttext">Charities</p>
            </button>
            <button class="white-button"><i class="fa-solid fa-flag" style="font-size: 24px;"></i>
                <p class="buttext">Consulates</p>
            </button>
            <button class="white-button"><i class="fa-solid fa-school" style="font-size: 24px;"></i>
                <p class="buttext">Schools</p>
            </button>
            <button class="white-button"><i class="fa-solid fa-graduation-cap" style="font-size: 24px;"></i>
                <p class="buttext">Universities</p>
            </button>
            <form action="/login" method="get">
                <button type="submit" class="white-button"><i class="fa-solid fa-circle-user"
                        style="font-size: 24px;"></i>
                    <p class="buttext">Logout</p>
                </button>
            </form>
        </div>
    </div>

    </div>

    <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary yoa382" style="
      z-index: 8000;
      position: absolute;
      margin-top: 100px !important;
      margin: 16px;
      border-radius: 6px;
      visibility: hidden;
      right: 0;
    ">
        <div href="/"
            class="d-flex align-items-center flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom"
            style="box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);   background: linear-gradient(90deg, rgba(39,39,122,1) 0%, rgba(101,26,26,1) 100%); border:none !important; border-top-left-radius: 6px; border-top-right-radius: 6px;">
            <a href="#" onclick="hideSidebar()" style="color: white !important;">
                <i class="fa-regular fa-circle-xmark" style="font-size: 20px; margin-top: 4px;"></i>
            </a>
            <span class="fs-5 fw-semibold" style="color:white !important; margin-left: 20px;">Sonuçlar:</span>
        </div>
        <div class="list-group liste-grup list-group-flush border-bottom scrollarea scroll" id="results-list"></div>
    </div>

    </div>

    <div class="container">




        <div class="CountContainer" style="width: 89% !important">
            <h1
                style="margin-left: 16px;color:white; text-shadow: 2px 2px 5px #222; float:left; margin-top:16px; margin-bottom: 1px;font-size: 24px; margin-left: 30px;">
                Add User:</h1>

            <br><br> <br>
            <div class="tabContainer">
                <form method="post" action="/add-user">
                    <div class="input-group mb-3">
                        <input type="email" class="form-control" placeholder="Username" name="username">
                    </div>
                    <div class="input-group mb-3">
                        <input type="password" class="form-control" placeholder="Password" name="password">
                    </div>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Verification Code" name="verification">
                    </div>
                    <button type="submit" class="btn btn-warning">Add User</button>
                </form>
                
            </div>

        </div>

        


        <div class="OptionContainer" style="width: 89% !important">
            <h1
                style="margin-left: 16px;color:white; text-shadow: 2px 2px 5px #222; float:left; margin-top:16px; margin-bottom: 1px;font-size: 24px; margin-left: 30px;">
                User List:</h1>

            <br><br> <br>
            <div class="tabContainer">
                <table class="table table-striped table-dark" style="width:1060px !important">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">E-Mail</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for (const user of usersData.users) { %>
                        <tr>
                            <th scope="row"><%= user.id %></th>
                            <td><%= user.email %></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            
                            <td>
                                <form action="/remove-user" method="post">
                                    <input type="hidden" name="id" value="<%= user.id %>">
                                    <button type="submit" class="btn btn-danger">Remove</button>
                                </form>
                            </td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
                
            </div>




        </div>



        <div class="OptionContainer">
            <h1
                style="margin-left: 16px;color:white; text-shadow: 2px 2px 5px #222; float:left; margin-top:16px; margin-bottom: 1px;font-size: 24px; margin-left: 30px;">
                Operation Menu:</h1>

            <br><br>
            <div class="tabContainer">
                <a href="/admin">
                    <div class="opmenu">

                        <i class="fa-solid fa-home"
                            style="margin-top: 50px; margin-left: 50px; margin-bottom: 10px;font-size: 128px;  color:white; opacity: 0.1;"></i>

                        <p
                            style="color:white; font-size: 36px; font-weight:400; margin-top: -2px; margin-right: 24px; float:right;">
                            Home</p>
                    </div>
                </a>
                <a href="/tools">
                    <div class="opmenu">

                        <i class="fa-solid fa-gear"
                            style="margin-top: 50px; margin-left: 60px; margin-bottom: 10px;font-size: 128px;  color:white; opacity: 0.1; "></i>

                        <p
                            style="color:white; font-size: 36px; font-weight:400; margin-top: -2px; margin-right: 24px; float:right;">
                            Site Tools</p>
                    </div>
                </a>
                <a href="/add">
                    <div class="opmenu">

                        <i class="fa-solid fa-school"
                            style="margin-top: 50px; margin-left: 43px; margin-bottom: 10px;font-size: 128px;  color:white; opacity: 0.1;"></i>

                        <p
                            style="color:white; font-size: 36px; font-weight:400; margin-top: -2px; margin-right: 24px; float:right;">
                            Add Org.</p>
                    </div>
                </a>
                <a href="/remove">
                    <div class="opmenu">

                        <i class="fa-solid fa-trash"
                            style="margin-top: 50px; margin-left: 70px; margin-bottom: 10px;font-size: 128px;  color:white; opacity: 0.1;"></i>

                        <p
                            style="color:white; font-size: 36px; font-weight:400; margin-top: -2px; margin-right: 24px; float:right;">
                            Delete Org.</p>
                    </div>
            </div>
            </a>


        </div>


    </div>

</body>


























</html>

<script type="text/javascript" src="js/main.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"
    integrity="sha512-VK2zcvntEufaimc+efOYi622VN5ZacdnufnmX7zIhCPmjhKnOi9ZDMtg1/ug5l183f19gG1/cBstPO4D8N/Img=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        document.getElementById('add-user-button').addEventListener('click', () => {
            const username = document.getElementById('add-username').value;
            const password = document.getElementById('add-password').value;
            const verificationCode = document.getElementById('add-verification-code').value;
    
            // Send form data to the server for processing
            fetch('/add-user', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, password, verification: verificationCode })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Refresh the page to update the user table
                    window.location.reload();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
    
            // Clear the form fields
            document.getElementById('add-username').value = '';
            document.getElementById('add-password').value = '';
            document.getElementById('add-verification-code').value = '';
        });
    </script>